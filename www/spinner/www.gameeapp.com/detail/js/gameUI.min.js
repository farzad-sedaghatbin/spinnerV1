function showConsole(){"undefined"!=typeof console&&("undefined"!=typeof console.log?console.olog=console.log:console.olog=function(){}),console.log=function(e){console.olog(e),$("body").prepend('<p style="color: black">'+e+"</p>")},console.error=console.debug=console.info=console.log}function transformOverlay(e,a){var t=e.innerWidth(),n=e.innerHeight(),i=$("#canvasWrap").height(),s=$("#gameeFrameMobile").width(),o=s/6.8/100,r=i/5.36/100;a&&(o=Math.min(o,r),r=o);var l=Math.round((s-t)/2),c=Math.round((i-n)/2-50);e.css({"-webkit-transform":"translate("+l+"px, "+c+"px) scale3d("+o+", "+r+", 1)",transform:" translate("+l+"px, "+c+"px) scale3d("+o+", "+r+", 1)"})}function transformControls(e,a){var t=$("#controller"),n=e.innerWidth(),i=e.innerHeight(),s=(n-190)/2.7/100,o=i/2.7/100;a&&(s=Math.min(s,o),o=s),t.css({"-webkit-transform":"scale3d("+s+", "+o+", 1)",transform:"scale3d("+s+", "+o+", 1)"})}function transformControls2(e,a){var t=$("#restart"),n=$("#play"),i=$("#control-resume"),s=$(".gameLoading"),o=e.innerWidth(),r=e.innerHeight(),l=o/2/100,c=r/1.52/100;a&&(l=Math.min(l,c),c=l),l>=1&&(l=1,c=1),t.css({"-webkit-transform":"scale3d("+l+", "+c+", 1)",transform:"scale3d("+l+", "+c+", 1)"}),n.css({"-webkit-transform":"scale3d("+l+", "+c+", 1)",transform:"scale3d("+l+", "+c+", 1)"}),i.css({"-webkit-transform":"scale3d("+l+", "+c+", 1)",transform:"scale3d("+l+", "+c+", 1)"}),s.css({"-webkit-transform":"scale3d("+l+", "+c+", 1)",transform:"scale3d("+l+", "+c+", 1)"})}function resizeElements(e,a){var t=document.getElementById("gameeFrameMobile"),n=document.getElementById("canvasWrap"),i=document.getElementById("controls"),s=$(".overlay .inner");s.css("max-width",e+"px"),t.width=e,t.height=e,t.style.width=e+"px",t.style.height=e+"px",n.style.height=e+"px",n.style.width=e+"px",i.style.height=a-e+"px",transformOverlay($("#overlay-start .transform"),!0),transformOverlay($("#overlay-end .transform"),!0),transformOverlay($("#overlay-pause .transform"),!0),transformControls($("#controls"),!0),transformControls2($("#controls"),!0)}function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){return keys[e.keyCode]?(preventDefault(e),!1):void 0}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys,document.ontouchmove=function(e){e.preventDefault()},document.addEventListener("touchmove",function(e){e.preventDefault()},!1)}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null,document.ontouchmove=null}var Game={},GameeBridge={},gameeUI={},timer;window.scrollerConfigHorizontal={scroll:"horizontal",lockOnDirection:!0},Pace.on("done",function(){gameeUI.gameLoaded(),resizeElements(window.innerWidth,window.innerHeight),$(".preloader").hide()}),"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),disableScroll(),$(window).on("load",function(){var e=$(".gameFrame"),a=$("#gameeFrameMobile");navigator.userAgent.toLowerCase();a.attr("src",a.data("src")),Game=gameeGame(e[0]),Game2=gamee2Game(e[0],gameeUI),gameeUI.gameLoader.show(),gameeUI.playBtn.hide(),"tw"===webviewProvider&&$(".share-fb").remove(),"fb"===webviewProvider&&$(".share-tw").remove(),$(".cRankingsBtn").on("click",function(e){e.preventDefault(),gameeUI.fullRankings.show()}),$(".cRankingsBtn_close").on("click",function(e){e.preventDefault(),gameeUI.fullRankings.hide()}),window.addEventListener("resize",function(){resizeElements(document.body.offsetWidth,document.body.offsetHeight)})}),window.addEventListener("orientationchange",function(){setTimeout(function(){resizeElements(document.body.offsetWidth,document.body.offsetHeight)},500)},!1);var mql=window.matchMedia("(orientation: portrait)");mql.matches||$("#alert").removeClass("hide").addClass("visible"),mql.addListener(function(e){e.matches?(enableScroll(),$("#alert").removeClass("visible").addClass("hide"),"paused"===gameeUI.currentState&&gameeUI.gameResume()):(disableScroll(),$("#alert").removeClass("hide").addClass("visible"),"playing"===gameeUI.currentState&&gameeUI.gamePause())}),GameeBridge={resume:function(){isGamee2()?Game2.resume():Game.resume()},start:function(){isGamee2()?Game2.start(!1):""},pause:function(){isGamee2()?Game2.pause():Game.pause()},restart:function(){isGamee2()?Game2.start(!1):Game.restart()}},gameeUI={currentState:"init",user:null,anonymous_id:null,firstPlay:!0,gameHighscore:0,highscoreBeat:!1,playTime:0,score:0,myRank:null,myPhoto:null,gameeVer:1,allRankings:{},gameLoaded:function(){var e=$("html"),a=$(".gameFrame");e.addClass("loaded"),gameeUI.startOverlay.show(),a.focus(),"undefined"!=typeof kik&&kik.enabled&&kik.getUser(function(e){e?(gameeUI.user=e.username,gameeUI.getStats()):(gameeUI.user=null,kik.getAnonymousUser(function(e){gameeUI.anonymous_id=e}))}),(isTelegram()||isFacebook())&&gameeUI.getStats()},init:function(e,a){console.log("GameeJS - 2: init"),this.gameeVer=2,a(e)},gameReady:function(){console.log("GameeJS 2: ready"),gameeUI.gameLoader.hide(),gameeUI.playBtn.show()},requestSocial:function(){console.log("GameeJS 2: Socials requested")},saveState:function(){console.log("GameeJS 2: save state")},gameStart:function(){console.log("Game Start"),gameeUI.currentState="playing",gameeUI.timer.start(),gameeUI.updateScore(0),isGamee2()&&GameeBridge.start(!1)},gameBegin:function(){gameeUI.startOverlay.hide(),gameeUI.playBtn.hide(),gameeUI.controls.show(),isGamee2()&&gameeUI.gameStart()},gameOver:function(){var e=parseInt($(".totalScore").html());parseInt($(".highscore").html());$("#overlay-end .rankings, #overlay-end .ranks-wrap").removeClass("visible"),$(".share-tw").attr("href",gameeUI.game_tw_link(e)),gameeUI.currentState="gameOver",gameeUI.highscoreBeat=!1,gameeUI.setScoreCustomText("Good job"),$(".relatedGames").length&&(window.scroller4=new Scroller("#overlay-end .relatedGames .scrollArea",scrollerConfigHorizontal)),gameeUI.overlay.show(),gameeUI.controls.hide(),setTimeout(function(){gameeUI.restartBtn.show()},500),gameeUI.saveScore(gameeUI.score),gameeUI.updateHighscore(gameeUI.score),gameeUI.sendMixpanel(window.gameeUI.score),gameeUI.timer.stop()},gameRestart:function(){GameeBridge.restart(),gameeUI.overlay.hide(),gameeUI.controls.show(),gameeUI.restartBtn.hide(),$(".this-share").removeClass("visible"),$(".overlay .this-share a").css("opacity","0"),$("#overlay-end .rankings .item").css("opacity","0"),$(".ranks-wrap").removeClass("visible")},gamePause:function(){gameeUI.currentState="paused",GameeBridge.pause(),gameeUI.overlayPause.show(),gameeUI.controls.hide(),gameeUI.resumeBtn.show(),$(".your_score").addClass("paused"),gameeUI.timer.pause()},gameResume:function(){gameeUI.currentState="playing",gameeUI.overlayPause.hide(),gameeUI.timer.resume(),gameeUI.resumeBtn.hide(),gameeUI.controls.show(),$(".your_score").removeClass("paused"),GameeBridge.resume()},setController:function(e){gameeUI.gameLoader.hide(),gameeUI.playBtn.show()},checkFbStatus:function(e){gameeUI.myPhoto=e.photo},game_tw_link:function(e){return"https://twitter.com/share?text=Attention%20please,%20I%20have%20just%20scored%20"+e+"%20in%20"+gameGlobals.game_name+"!%20%40gameeapp%20&url="+gameGlobals.game_url},updateScore:function(e){var a=$(".totalScore");gameeUI.score=e,a.html(parseInt(e)),gameeUI.checkRankStatus(e)},updateOverall:function(e){gameGlobals.overallScore=e},updateHighscore:function(e){gameeUI.score>gameeUI.gameHighscore?(gameeUI.gameHighscore=e,gameeUI.firstPlay=!1,gameeUI.setScoreMessage("New highscore")):gameeUI.setScoreMessage("You scored")},checkRankStatus:function(e){var s,a=gameeUI.gameHighscore,t=$(".rankStatus"),n=$(".inner",".rankStatus"),i='<div class="highscore"><span class="ic"></span> Highscore beat</div>',o=gameeUI.highscoreBeat,r=gameeUI.allRankings,l=r.length-1;e>a&&e>0&&o===!1&&gameeUI.firstPlay===!1&&(n.html(i),s=!0,gameeUI.highscoreBeat=!0),0!=Object.keys(r).length&&e>r[l].score&&(gameeUI.highscoreBeat===!0&&gameeUI.myRank!==r[l].rank&&(n.html('<div class="person"><img src="'+addProfilePicture(r[l].profile_picture)+'" class="pic" width="18" /> <span class="name">'+r[l].username+"</span> beat</div>"),s=!0),r.splice(l)),s&&(t.show(),setTimeout(function(){t.hide(),s=!1},2200))},setScoreMessage:function(e){$(".you_scored_text",".your_score").html(e)},setScoreCustomText:function(e){$(".custom_text",".your_score").html(e)},overlay:{show:function(){$("#canvasWrap").addClass("overlayVisible"),$("#overlay-end").addClass("visible"),$("#controls").addClass("visible")},hide:function(){$("#canvasWrap").removeClass("overlayVisible"),$("#overlay-end").removeClass("visible"),$("#controls").removeClass("visible")}},overlayPause:{show:function(){$("#canvasWrap").addClass("overlayVisible"),$("#overlay-pause").addClass("visible"),$("#controls").addClass("visible")},hide:function(){$("#canvasWrap").removeClass("overlayVisible"),$("#overlay-pause").removeClass("visible"),$("#controls").removeClass("visible")}},startOverlay:{show:function(){$("#canvasWrap").addClass("overlayVisible"),$("#overlay-start").addClass("visible"),$("#controls").addClass("visible")},hide:function(){$("#canvasWrap").removeClass("overlayVisible"),$("#overlay-start").removeClass("visible"),$("#controls").removeClass("visible"),$("#overlay-start .ranks-wrap").removeClass("visible")}},controls:{show:function(){$("#controller").addClass("visible")},hide:function(){$("#controller").removeClass("visible")}},dataLoader:{show:function(){},hide:function(){}},ranksLoading:{show:function(){$(".spinner",".rankings").show()},hide:function(){$(".spinner",".rankings").hide()}},shareLoading:{show:function(){$(".challenge-friends").prepend('<span class="spinner"></span>')},hide:function(){$(".spinner",".challenge-friends").remove()}},gameLoader:{show:function(){$(".gameLoading").remove(),$("#controls .cWrap").append('<div class="gameLoading"><div class="icn"></div></div>'),$("#overlay-start .transform").append('<div class="gameLoading fs-loading"><div class="icn"></div></div>')},hide:function(){$(".gameLoading").remove(),$("#overlay-start .rankings").addClass("loaded").removeClass("loading")}},restartBtn:{show:function(){$(".cLayout.restart, .control-fs-restart").addClass("visible")},hide:function(){$(".cLayout.restart, .control-fs-restart").removeClass("visible")}},playBtn:{show:function(){$(".cLayout.play, .control-fs-play").addClass("visible")},hide:function(){$(".cLayout.play, .control-fs-play").removeClass("visible")}},resumeBtn:{show:function(){$(".cLayout.resume, .control-fs-resume").addClass("visible")},hide:function(){$(".cLayout.resume, .control-fs-resume").removeClass("visible")}},fullRankings:{show:function(){$("#overlay-standing .in").css("max-height",document.body.offsetHeight-130+"px"),$("#gameeMobile #overlay-standing").addClass("visible"),gameeUI.getFullRankings()},hide:function(){disableScroll(),$("#gameeMobile #overlay-standing").removeClass("visible")}},timer:{start:function(){timer=setInterval(function(){++gameeUI.playTime},1e3)},pause:function(){clearTimeout(timer)},resume:function(){timer=setInterval(function(){++gameeUI.playTime},1e3)},stop:function(){clearTimeout(timer),gameeUI.playTime=0}},sendMixpanel:function(e){mixpanel.track("Game Played",{"game name":gameGlobals.game_name,"game genre":gameGlobals.game_genre,"game score":e,"game play time":gameeUI.playTime,source:gameGlobals.game_source,"web version":"mobile"})},sendMixpanelShare:function(e,a,t){mixpanel.track("Web Game Shared",{type:e,screen:a,"web version":t})},setGameOverRankings:function(e){var a=e.result.ranking,t=0!=Object.keys(a.beforeMe).length?a.beforeMe:"",n=Object.keys(t).map(function(e){return t[e]}),i=n.reverse(),s=0!=Object.keys(a.afterMe).length?a.afterMe:"",o=Object.keys(s).map(function(e){return s[e]}),r=o.reverse(),l=a.me,c="",d="",m="",u="",f="",g="",p="",v=Object.keys(t).length+Object.keys(s).length+1;if($("#overlay-end .rankings .items .item, #overlay-pause .rankings .items .item").remove(),0!=Object.keys(a.afterMe).length)for(var h in r)d+='<div class="item"><div class="pic_wrap"><img src="'+addProfilePicture(r[h].profile_picture)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>'+formatUsername(r[h].username)+'</span></div><div class="points">'+(r[h].score?r[h].score:"-")+"</div></div>";if(0!=Object.keys(a.me).length&&(meRankTpl='<div class="item me"><div class="pic_wrap"><img src="'+addProfilePicture(l.profile_picture)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>Me</span></div><div class="points">'+(l.score?l.score:"-")+"</div></div>"),2>=v?($(".rankings .headline").html("You vs friend"),$(".rankings .headline").addClass("text-center"),1===v&&(m='<div class="item vs">vs</div>'),0===Object.keys(a.beforeMe).length&&1===Object.keys(a.afterMe).length&&(u='<div class="item vs">vs</div>',g=meRankTpl,meRankTpl=""),1===Object.keys(a.beforeMe).length&&0===Object.keys(a.afterMe).length&&(f='<div class="item vs">vs</div>')):$(".rankings .headline").html("Group rankings"),(1===v||3===v)&&(p+='<div class="item friend challenge-friends '+onPlatform()+'"><div class="pic_wrap"><img src="../detail/assets/svg/rankings-icn-empty-user.svg" class="pic" /></div><div class="username"><span>Friend</span></div><div class="points">-</div></div>'),0!=Object.keys(a.beforeMe).length)for(var h in i)c+='<div class="item"><div class="pic_wrap"><img src="'+addProfilePicture(i[h].profile_picture)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>'+formatUsername(i[h].username)+'</span></div><div class="points">'+(i[h].score?i[h].score:"-")+"</div></div>";$("#overlay-end .rankings .items, #overlay-pause .rankings .items").append(g+u+d+meRankTpl+f+c+m+p),v>4&&(window.scroller2.refresh(),window.scroller3.refresh()),window.dispatchEvent(new Event("resize"))},setStartRankings:function(e){var a=e.result.ranking,t=0!=Object.keys(a.beforeMe).length?a.beforeMe:"",n=Object.keys(t).map(function(e){return t[e]}),i=n.reverse(),s=0!=Object.keys(a.afterMe).length?a.afterMe:"",o=Object.keys(s).map(function(e){return s[e]}),r=o.reverse(),l=a.me,c="",d="",m="",u="",f="",g="",p="",v=Object.keys(t).length+Object.keys(s).length+1;if(v>3&&$(".cRankingsBtn").css("display","inline-block"),$("#overlay-start .rankings .items .item, #overlay-pause .rankings .items .item").remove(),0!=Object.keys(a.afterMe).length)for(var h in r)d+='<div class="item"><div class="pic_wrap"><img src="'+addProfilePicture(r[h].profile_picture)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>'+formatUsername(r[h].username)+'</span></div><div class="points">'+(r[h].score?r[h].score:"-")+"</div></div>";if(0!=Object.keys(a.me).length){var y;l.score>0&&(gameeUI.gameHighscore=parseInt(l.score),gameeUI.firstPlay=!1),isFacebook()?y=gameeUI.myPhoto:l.profile_picture&&(y=l.profile_picture),meRankTpl='<div class="item me"><div class="pic_wrap"><img src="'+addProfilePicture(y)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>Me</span></div><div class="points">'+(l.score?l.score:"-")+"</div></div>"}if(2>=v?($(".rankings .headline").html("You vs friend"),$(".rankings .headline").addClass("text-center"),1===v&&(m='<div class="item vs">vs</div>'),0===Object.keys(a.beforeMe).length&&1===Object.keys(a.afterMe).length&&(f='<div class="item vs">vs</div>',g=meRankTpl,meRankTpl=""),1===Object.keys(a.beforeMe).length&&0===Object.keys(a.afterMe).length&&(u='<div class="item vs">vs</div>')):$(".rankings .headline").html("Group rankings"),(1===v||3===v)&&(p+='<div class="item friend challenge-friends '+onPlatform()+'"><div class="pic_wrap"><img src="../detail/assets/svg/rankings-icn-empty-user.svg" class="pic" /></div><div class="username"><span>Friend</span></div><div class="points">-</div></div>'),0!=Object.keys(a.beforeMe).length)for(var h in i)c+='<div class="item"><div class="pic_wrap"><img src="'+addProfilePicture(i[h].profile_picture)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div><div class="username"><span>'+formatUsername(i[h].username)+'</span></div><div class="points">'+(i[h].score?i[h].score:"-")+"</div></div>";$("#overlay-start .rankings .items, #overlay-pause .rankings .items").append(g+f+d+meRankTpl+u+c+m+p),v>4&&(window.scroller1=new Scroller("#overlay-start .rankings .scrollArea",scrollerConfigHorizontal),window.scroller2=new Scroller("#overlay-end .rankings .scrollArea",scrollerConfigHorizontal),window.scroller3=new Scroller("#overlay-pause .rankings .scrollArea",scrollerConfigHorizontal)),transformOverlay($("#overlay-start .transform"),!0),window.dispatchEvent(new Event("resize"))},saveScore:function(e){var a=window.location.pathname,t=gameeUI.user,n=(new Date).getTime(),i=$("#dataId").data(),s=CryptoJS.AES.encrypt(JSON.stringify({score:e,timestamp:n}),i.id,{format:CryptoJSAesJson}).toString(),o={score:e,url:a,play_time:gameeUI.playTime,hash:s,username:t,anonymous_id:gameeUI.anonymous_id};if(isFacebook()){var r=FacebookUserData.getUserData();o.app_scoped_user_id=r.app_scoped_user_id,o.user_id=r.user_id}gameeUI.sendScoreData(o)},sendScoreData:function(e){var a=JSON.stringify(e),t=$(".rankingsFailed"),n=getBotsApiUrl()+"/set-web-score-qkfnsog26w7173c9pk7whg0iau7zwhdkfd7ft3tn";gameeUI.ranksLoading.show(),$("#overlay-end .rankings .items .item, #overlay-pause .rankings .items .item").remove(),$("#overlay-end .rankings, #overlay-end .ranks-wrap").addClass("visible"),$.ajax({type:"POST",url:n,data:a,success:function(e){gameeUI.ranksLoading.hide(),(isTelegram()||isKik()||isFacebook())&&(isEmpty(e.result.ranking)||(gameeUI.setGameOverRankings(e),gameeUI.saveRankingsToObject(e))),$(".this-share").addClass("visible")},error:function(e,a){gameeUI.ranksLoading.hide(),t.show()},timeout:1e4,dataType:"json",crossDomain:!0})},setFullRankings:function(e){var a=e.result.ranking,t=null===e.result.myRank?"0":e.result.myRank,n=e.result.membersCount;if($("#overlay-standing .membersCount").html(n),$("#overlay-standing .myPosition").html(t+nth(t)),$("#overlay-standing .items .row").remove(),Object.keys(a).length>0)for(var i in a){var s=a[i].rank===t?"me":"",r=a[i].profile_picture;$("#overlay-standing .items").append('<div class="row '+s+'"><div class="line"><div class="number">'+a[i].rank+'.</div><div class="pic_wrap"><div class="pic_in"><img src="'+addProfilePicture(r)+'" class="pic" onerror="this.src=\'../detail/assets/png/avatar-placeholder.png\';" /></div></div><div class="name"><span>'+a[i].username+'</span></div><div class="points">'+a[i].score+"</div></div></div>")}},saveRankingsToObject:function(e){var a=e.result.ranking.beforeMe,t=Object.keys(a).map(function(e){return a[e]}),n=null===e.result.ranking.me.rank?"0":e.result.ranking.me.rank;Object.keys(a).length>0&&(gameeUI.allRankings=t,gameeUI.myRank=n)},getFullRankings:function(){var e=window.location.pathname,a=gameeUI.user,t={url:escape(e)};null!=gameeUI.anonymous_id&&(a=""),isFacebook()&&(t.facebook_user_id=FacebookUserData.getUserData().app_scoped_user_id),isKik()&&(t.username=a);var n=getBotsApiUrl()+"/api/game-url-ranking";gameeUI.dataLoader.show(),$.ajax({type:"GET",url:n,data:t,xhrFields:{withCredentials:!0},success:function(e){gameeUI.dataLoader.hide(),gameeUI.setFullRankings(e),enableScroll()},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa("web-api:1k2tnlowfvzfjursfhf523fuenc1guzwxfq8jgc8"))},error:function(e,a){gameeUI.dataLoader.hide()},timeout:1e4,dataType:"json",crossDomain:!0})},getStats:function(){var e=window.location.pathname,a=gameeUI.user,t={url:escape(e)};if(null!=gameeUI.anonymous_id&&(a=""),isKik()&&(t.username=a),isFacebook()){var n=this;FacebookUserData.addAfterLoginCallback(function(){t.facebook_user_id=FacebookUserData.getUserData().app_scoped_user_id,n.checkFbStatus(FacebookUserData.getUserData()),FacebookUserData.isLoggedIn()?n.getSurroundingRankings(t):($("#overlay-start .ranks-wrap").addClass("visible"),$(".fb-connect").show(),$("#overlay-start .rankings, #overlay-start .this-share").hide())})}else this.getSurroundingRankings(t)},getSurroundingRankings:function(e){var a=getBotsApiUrl()+"/api/game-url-surrounding-ranking",t=$(".rankingsFailed");gameeUI.ranksLoading.show(),$("#overlay-start .rankings, #overlay-pause .rankings, #overlay-start .ranks-wrap").addClass("visible"),$.ajax({type:"GET",url:a,data:e,success:function(e){gameeUI.ranksLoading.hide(),isEmpty(e.result.ranking)||(gameeUI.setStartRankings(e),(isFacebook()||isTelegram()||isKik())&&gameeUI.saveRankingsToObject(e))},xhrFields:{withCredentials:!0},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa("web-api:1k2tnlowfvzfjursfhf523fuenc1guzwxfq8jgc8"))},error:function(e,a){gameeUI.ranksLoading.hide(),t.show()},timeout:1e4,crossDomain:!0})},kikPickFriends:function(){kik.pickUsers(function(e){e&&e.forEach(function(e){kik.send(e.username,{title:"Let's play this game! ;)",text:"... "+gameGlobals.game_name+" "+window.location.href,pic:gameGlobals.game_img})})})}};var keys={37:1,38:1,39:1,40:1},webviewProvider=function(){return/\/FBIOS/i.test(navigator.userAgent)===!0?"fb":/Twitter for/i.test(navigator.userAgent)===!0?"tw":/\/\/t.co\//i.test(document.referrer)===!0?"tw":null}();$(".re-request-friends-permission").on("click",function(e){e.preventDefault(),FacebookUserData.forceRelogin()}),$(".action-fb-connect").on("click",function(e){e.preventDefault(),FacebookUserData.forceConnect()}),$(".pauseGame").on("click",function(){gameeUI.gamePause()}),$("#control-restart, .control-fs-restart").on("click touchend",function(e){e.preventDefault(),gameeUI.gameRestart()}),$("#control-play, .control-fs-play").on("click touchend",function(e){e.preventDefault(),gameeUI.gameBegin()}),$("#control-resume, .control-fs-resume").on("click",function(e){gameeUI.gameResume()}),$(".this-share a").on("click",function(e){var a=$(this).data("screen"),t=$(this).data("type"),n=$(this).data("version");gameeUI.sendMixpanelShare(t,a,n)}),$(document).on("click",".challenge-friends",function(e){gameeUI.shareLoading.show(),setTimeout(function(){gameeUI.shareLoading.hide()},2500)}),$(document).on("click",".challenge-friends.on-telegram, .challenge-btn.on-telegram",function(e){TelegramGameProxy.shareScore()}),$(document).on("click",".challenge-friends.on-kik, .challenge-btn.on-kik",function(e){gameeUI.kikPickFriends()}),$(document).on("click",".challenge-friends.on-fb, .challenge-btn.on-fb",function(e){var a=$("body").attr("data-bot-deep-link-base"),t={type:"game",code:gameGlobals.game_code,name:FacebookUserData.getUserData().facebookName,score:gameeUI.gameHighscore,gender:FacebookUserData.getUserData().gender,pageScopedUserId:FacebookUserData.getUserData().user_id,appScopedUserId:FacebookUserData.getUserData().app_scoped_user_id},n=a+"?ref="+encodeURIComponent(JSON.stringify(t)),i={attachment:{type:"template",payload:{template_type:"generic",elements:[{title:"Can you beat me in "+gameGlobals.game_name,image_url:gameGlobals.game_img,subtitle:"My score is: "+t.score,default_action:{type:"web_url",url:n},buttons:[{type:"web_url",url:n,title:"▶ Play "+gameGlobals.game_name}]}]}}};MessengerExtensions.beginShareFlow(function(){},function(e,a){var t=$("body").data("facebook-bot-app-id"),n=gameGlobals.game_fullUrl;window.open("fb-messenger://share?link="+encodeURIComponent(n)+"&app_id="+encodeURIComponent(t))},i,"broadcast")}),document.getElementById("control-oneButton").addEventListener("touchstart",function(e){Game.buttonButtonDown()},!1),document.getElementById("control-oneButton").addEventListener("touchend",function(e){setTimeout(function(){Game.buttonButtonUp()},20)},!1),document.getElementById("control-arrow-up").addEventListener("touchstart",function(e){Game.upButtonDown()},!1),document.getElementById("control-arrow-up").addEventListener("touchend",function(e){setTimeout(function(){Game.upButtonUp()},20)},!1),document.getElementById("control-arrow-down").addEventListener("touchstart",function(e){Game.downButtonDown()},!1),document.getElementById("control-arrow-down").addEventListener("touchend",function(e){setTimeout(function(){Game.downButtonUp()},20)},!1),document.getElementById("control-arrow-left").addEventListener("touchstart",function(e){Game.leftButtonDown()},!1),document.getElementById("control-arrow-left").addEventListener("touchend",function(e){setTimeout(function(){Game.leftButtonUp()},20)},!1),document.getElementById("control-arrow-right").addEventListener("touchstart",function(e){Game.rightButtonDown()},!1),document.getElementById("control-arrow-right").addEventListener("touchend",function(e){setTimeout(function(){Game.rightButtonUp()},20)},!1),document.getElementById("control-buttonA").addEventListener("touchstart",function(e){Game.aButtonDown()},!1),document.getElementById("control-buttonA").addEventListener("touchend",function(e){setTimeout(function(){Game.aButtonUp()},20)},!1),document.getElementById("control-buttonB").addEventListener("touchstart",function(e){Game.bButtonDown()},!1),document.getElementById("control-buttonB").addEventListener("touchend",function(e){setTimeout(function(){Game.bButtonUp()},20)},!1),$("#overlay-start .btn-reload").on("click",function(e){var a=$(".rankingsFailed");a.hide(),gameeUI.ranksLoading.show(),gameeUI.getStats(),e.preventDefault()}),$("#overlay-end .btn-reload").on("click",function(e){var a=$(".rankingsFailed");a.hide(),gameeUI.ranksLoading.show(),gameeUI.saveScore(gameeUI.score),e.preventDefault()});